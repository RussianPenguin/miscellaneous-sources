<!doctype html public "-//w3c//dtd html 4.0 transitional//en"> 
<html> 
<head> 
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
   <meta name="author" content="Mike Gifford, OpenConcept Consulting, http://www.openconcept.on.ca"> 
   <meta name="KeyWords" content="OpenConcept, open, concept, open concept, web design, domain names, web hosting, consulting, education, research, facilitation, consulting, registration, PHP, MySQL, opensource, scripts, whois, linux, gimp, gnome, web activism"> 
   <meta name="Description" content="OpenConcept Consulting provides web design and web hosting services.  We focus on serving non-profit and social justice organizations."> 
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (X11; U; Linux 2.2.14 i686) [Netscape]">
   <meta name="GENERATOR" content="Bluefish, Webmaker, gnotepad+, or whatever I stumble across">
   <meta name="title" content="OpenConcept Consulting - Web Design & Hosting">
   <meta name="copyright" content="OpenConcept Consulting">
   <meta http-equiv="content-language" content="English, French">
   <meta name="revisit-after" content="7 days">
   <meta name="robots" content="index, follow">
   <meta name="page-topic" content="Web Design and Hosting">
   <title>OpenConcept Consulting: Plain Language Guide to PHP Greeting Cards v0.2</title> 
   <link HREF="open0000.css" REL="stylesheet" TYPE="text/css">

</head>

<body text="#000000" bgcolor="#FFFFFF" link="#CC33CC" vlink="#009900" alink="#FF6600">

<table border="0" cellPadding="0" cellSpacing="0">
  <tbody>
    <tr>

<!-- Logo -->
<td align="left" valign="bottom" width="150" class="head">
<A HREF="http://www.openconcept.on.ca/"><img src="occ-smal.jpg" border="0" width="150" height="80" alt="OpenConcept Consulting"></A>
</td>

<td width="15"><SPACER height="15" width="15" type="block"></td>
	
<td valign="top" class="head">
<table class="head" width="100%" border="0" cellPadding="2" cellSpacing="0">
<tr>

<td width="15"><SPACER height="15" width="15" type="block"></td>

<td valign="top" class="head">

Google Search:<BR>
<!-- Search Google -->
<form method=GET action="http://www.google.com/custom">
<INPUT TYPE=text name=q size=18 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Go!"><INPUT type=hidden name=cof VALUE="LW:150;L:http://www.openconcept.on.ca/graphics/occ-small.jpg;LH:80;AH:left;GL:0;AWFID:1679123f841ca638;"><input type=hidden name=domains value="openconcept.on.ca">

<br>
<table class="head" width="100%" border="0" cellPadding="0" cellSpacing="0">
<tr><td class="head"><input type=radio name=sitesearch value="" checked> WWW</td>
<td class="head" align="right"><input type=radio name=sitesearch value="openconcept.on.ca"> OpenConcept</td></tr></table>
</FORM>

</td>

<td width="15"><SPACER height="15" width="15" type="block"></td>

<td valign="top" class="head">

WHOIS Domain Query:<BR>
<!-- Whois Search --> 
<form method="get" action="/whois/index.phtml">
<input name="query" TYPE=text size=18 maxlength=255 value="">
<input type="submit" value="Whois">

<br>
<table class="head" width="100%" border="0" cellPadding="0" cellSpacing="0">
<tr><td class="head"></td>
<td class="head" align="right">
<!-- <input type=radio name=register value="yes"> Register With Us Now! -->
</td></tr></table>

</form>



</td> 

<td width="15"><SPACER height="15" width="15" type="block"></td> 
             
<td valign="top" class="head"> 

<!--
Check Links to Your Site:<BR>-->
<!-- Search for Links --><!-- 
<form action="/searches.php3" method="get">
<input name="find" value="" TYPE=text size=18 maxlength=255><input type="submit" value="  Find  " class="button" name="show">
</form>
-->

</td>                
</tr>
</table>
</td>
</tr>

<tr height="1">
<!-- The Thin Blue Line -->
<td align="right" colspan=3 bgColor="#000066" height="1" vAlign="top" width="100%"><img src="space000.gif" width="1" height="1"></td></tr>
</tbody></table>


<!-- Begin Main Table -->
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td valign="top" width="150">

<!-- Begin Left Navigation -->
<table border="0" cellPadding="0" cellSpacing="0"  class="index">
<tbody>
<tr>
<td class="index">

<table border="0" cellPadding="0" cellSpacing="0"  class="index">
<tbody>
<tr>
<td class="index" colspan=2>

<!-- Curved Box -->
<table cellpadding=0 cellspacing=0 border=0 width="100%" class="white"><tr bgcolor="#000066"><td><img src="space000.gif" width="30" height="1"></td><td valign=top><img src="space000.gif" width="120" height="1" align="top"></td></tr><tr bgcolor="#000066" class="white"><td valign="top" align="left" width="30" valign="bottom"><img src="corner00.gif" border=0 width=30 height=30 alt="corner"></td><td class="white" width="90%"><font size="2" color="white" class="white"><DIV ALIGN=right><SMALL>Navigation&nbsp;</SMALL></DIV></font></td></tr></table></td></tr>

<tr bgcolor="#ffffff"><td valign=top width="135">
<img src="space000.gif" width="135" height="1">
<DIV ALIGN=right>
<A href="http://www.openconcept.on.ca/about.phtml">About Us</A>
<p><A href="http://www.openconcept.on.ca/services.phtml">Our Services</A>
<p><A href="http://www.openconcept.on.ca/experience.phtml">Experience</A>
<p><A href="http://www.openconcept.on.ca/costs.phtml">Pricing</A>
<p><A href="http://www.openconcept.on.ca/resource.phtml">Resources</A>
<p><A href="http://www.openconcept.on.ca/phpLinks/">Links</A>
<p><A href="http://www.openconcept.on.ca/contact.phtml">Contact Us</A><BR><BR>
</DIV>

</td>
<td width="15"><SPACER height="1" width="15" type="block"></td>

</tr>

<tr>
<td class="index" colspan=2>

<!-- Curved Box -->
<table cellpadding=0 cellspacing=0 border=0 width="100%" class="white"><tr bgcolor="#000066"><td><img src="space000.gif" width="30" height="1"></td><td valign=top><img src="space000.gif" width="120" height="1" align="top"></td></tr><tr bgcolor="#000066" class="white"><td valign="top" align="left" width="30" valign="bottom"><img src="corner00.gif" border=0 width=30 height=30 alt="corner"></td><td class="white" width="90%"><font size="2" color="white" class="white"><DIV ALIGN=right><SMALL>Featured Client&nbsp;</SMALL></DIV></font></td></tr></table></td></tr>


<tr>

<td align="left" vAlign="top" width="135">
<br><br>

<A href="http://www.openconcept.on.ca/experience.phtml#airdiv"><IMG SRC="airdivt2.gif" width="135" HEIGHT="81" alt="Airline Division of CUPE"></A><p>

<br>
</td>

<td align="left" vAlign="top" width="15"><SPACER height="15" width="15" type="block"></td>

</tr>
                  

 
<tr>
<td width="150" class="index" colspan=2>

<!-- Curved Box -->
<table cellpadding=0 cellspacing=0 border=0 width="100%" class="white"><tr bgcolor="#000066"><td><img src="space000.gif" width="30" height="1"></td><td valign=top><img src="space000.gif" width="120" height="1" align="top"></td></tr><tr bgcolor="#000066" class="white"><td valign="top" align="left" width="30" valign="bottom"><img src="corner00.gif" border=0 width=30 height=30 alt="corner"></td><td class="white" width="90%"><font size="2" color="white" class="white"><DIV ALIGN=right> <SMALL>Feedback&nbsp;</SMALL></DIV></font></td></tr></table></td></tr>

<tr>
<td width="135">
<CENTER><br><br>
<DIV ALIGN=center><FONT SIZE="-1">

<form METHOD="get" ACTION="feedback.php3">
<TEXTAREA NAME="comments" COLS="13" ROWS="4" wrap="virtual">Enter your feedback about the site</TEXTAREA>
<br><input TYPE="TEXT" NAME="name"  value="Name"  SIZE="15"> 
<br><input TYPE="TEXT" NAME="semail" value="Email" SIZE="15"> 
<br><input TYPE="radio" value="yes" NAME="list"> To receive updates. 
<br>
<input TYPE="SUBMIT" VALUE="Feedback!">
</form>
</FONT></DIV>
<br>

<A target="_blank" href="http://www.gimp.org/"><IMG SRC="gimp0000.gif" width="86" HEIGHT="37" alt="Graphics by GIMP" border=0></A>
</center>

<P><br>

<div align="center"><a href="http://www.openconcept.on.ca/registration-ca.phtml"><img src="cdn_doma.gif" width="110" height="60" alt="Register Your .CA Domain Now!"></a></div>




</CENTER>
</td>
</tr>

                </tbody>
              </table>

</td>

<td align="left" bgColor="#000066" vAlign="top" width="1" height="100%">
<!-- Vertical Bar -->
<img alt="line" height="1" src="space000.gif" width="1"></td>

</tr>
</tbody>
</table>
<!-- End Left Navigation -->

</td>

<td align="left" bgColor="#ffffff" vAlign="bottom" width="15"><img alt="line" height="1" src="space000.gif" width="15"></td>


<td align="left" valign="top" width="99%">
<img alt="line" height="1" src="space000.gif" width="435">
<!-- Begin Content -->
<h3>If you want to set up a simple online greeting card system, this is your script.  Using text files and PHP3 this script allows you to set up interactive greeting cards.  Version 0.2 works to make installation easier & your messages more secure.</h3>

<P> This script allows users to select an image and write a personalized message. 
It then sends a notice to the user specified email address and saves that 
information to a text file. The receipient then can go and access both 
the saved message and image from the website at a specified URL. The latest version uses
a random number to improve the security.  We have also improved cleaned up some problems
that users have noticed with the script.

<P>PHPCards presently uses four PHP files & one text file.  You need to ensure that your site has <a href="http://www.openconcept.on.ca/guide-php.phtml%0A">PHP3 enabled</a> and that you have write access to the text file.  If your server isn't configured so that it recognizes both .php3 and .phtml extensions, you will need to rename the files.  Also note that you will need to remove the .phps extension from each of the files below as that extension allows you to display the source, and does not parse it.

<P><HR width="75%"><P>

<table>
<tr>
<td>
<br><a href="http://www.openconcept.on.ca/cards/"><img src="phpcards.gif" width=120 height=80 align=top alt="PHPCards" border="0"></a>
<br><b><a href="http://www.openconcept.on.ca/cards/send.phtml">In Action</a</b>
</td>
<td valign="center">
The two basic functions of a greeting card is sending & recieving cards. 
<ul>
<li><a href="#send.phtml">send.phtml</a> in which the user selects the card and personalizes it.  
<li><a href="#send.php3">send.php3</a> takes that information, confirms it, generates a random number, writes it to the text file, & sends a the announcement.
<li><a href="#receive.phtml">receive.phtml</a> allows users to type in their message number and random number.
<li><a href="#receive.php3">receive.php3</a> confirms that these two numbers correspond and display the message.
<li><a href="#cardfile.txt">cardfile.txt</a> where the data is written for the script.
</ul>

<P>To download all of these scripts as a compressed file:
<blockquote>
<a href="http://www.openconcept.on.ca/PHPCards.tar.gz">PHPCards.tar.gz</a>
</blockquote>
</td>
</tr>
</table>

<p><hr width="50%"><p>
<A NAME="send.phtml"></A>
<h2>send.phtml</h2>
<P>For the most part, this is just a simple form.  The only part that is really critical is that the form be posted to <a href="#send.php3">send.php3</a>.
<blockquote>
&lt;form method="POST" action="/cards/send.php3"&gt;
</blockquote>
<P>The other PHP scripts on this page are largely there to make it easier for users to modify a card or reply to a card.  
<P><a href="http://www.openconcept.on.ca/send.phtml.phps">View the Source Code</a>

<p><hr width="50%"><p>
<A NAME="send.php3"></A>
<h2>send.php3</h2>
<p>This script first loads the contents of the text file into an array.  It then generates a new random number and incorporates the new message into the array.  This page contains a number of nested if statements before the message is sent.  The script checks to see that the sender & reciever's email addresses are correct using the following:
<blockquote>
if (eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*$", $remail))
</blockquote>
It then confirms that you want to send the message & then fires off a message to the recipient using:
<blockquote>
mail(stripslashes($recipient) . "<$remail>", stripslashes($sender) . " has sent you a card", $email_message,"From: $semail \nReply-To:$semail\nX-Mailer: PHP3\r\n Errors-To: mike@flora.org"); 
</blockquote>
and also writes it to the text file.  Each message of the text file is seperated by a carriage return. Each field of data is seperated by a ':'.  If the user doesn't confirm the card they are sent back to <a href="#send.phtml">send.phtml</a> either with the data that they entered or to a blank message (depending on their response).
<P><a href="http://www.openconcept.on.ca/send.php3.phps">View the Source Code</a>

<p><hr width="50%"><p>
<A NAME="receive.phtml"></A>
<h2>receive.phtml</h2>
<P>This is the simplest code of the script.  This can be easily inserted into sidebars or you can choose to have it sit as its own page.  Like the <a href="#send.phtml">send.phtml</a> script above, it is an html form.   The form's "action" needs to target the <a href="#receive.php3">receive.php3</a>
<P><a href="http://www.openconcept.on.ca/receive.phtml.phps">View the Source Code</a>

<p><hr width="50%"><p>
<A NAME="receive.php3"></A>
<h2>receive.php3</h2>
<P>Like <a href="#send.php3">send.php3</a>, receive.php3 is the work horse of the set.  This script starts by loading the text file into an array.  It then takes the card number, goes to that line of the array and using
<blockquote>
$tok = strtok($dataarray[$viewcard-1],":");
</blockquote>
This divides up the line into various fields and then proceeds to insert the data into HTML code in place of $tok.  If the random number in the text file is the same as the random number provided by the user, then the card is displayed.  The user is then asked if they would like to send a reply.

<P><a href="http://www.openconcept.on.ca/receive.php3.phps">View the Source Code</a>

<p><hr width="50%"><p>
<A NAME="cardfile.txt"></A>
<h2>cardfile.txt</h2>
<P>This is just a simple, blank text file.  However, you need to ensure that you have write access to this file.  Your server may allow you to change this file using something like the following:
<blockquote>
chmod 666 cardfile.txt
</blockquote>


<P><HR width="75%"><p>

If you are using this script on your site, please send me your URL and please provide a link to OpenConcept.  Also, if you've got improvements or suggestions for the code, please <a href="#feedback1">send them to me</a>.  The previous version of the script can be found <a href="http://www.openconcept.on.ca/oldguide-cards.phtml">here</a>.
<P><i>Todo List
<UL>
<li>Simplify the addition of multiple image pages
<li>Set up multiple files to reduce the text which is pulled into the array.
</UL>
</i>

<div align="center"><form action="http://www.hotscripts.com/cgi-bin/rate.cgi" method="POST">
<input type=hidden name="ID" value="6094">
<table BORDER="0" CELLSPACING="0" CELLPADDING="2" bgcolor="#CCCC99">
<tr><td><b>Rate this script in Hotscripts.com</b></TD>
<td><select name="rate" size="1"><option selected>Select Your Rating</option><option value="5">Excellent!</option><option value="4">Very Good</option><option value="3">Good</option><option value="2">Fair</option><option value="1">Poor</option></select></td><td><input type="submit" value="Rate It!"></td></tr></table></form></div>


 <P><HR width="75%"><p>

<a name="feedback1"></a></p>

        <h2>Please Fill Out The Following Feedback Form:</h2>

<form METHOD="get" ACTION="feedback.php3">
<input type="hidden" name="feedback" value="PHP3 Greeting Cards" size="20">
	<div align="center"><table><tr>
          <td>Was this guide useful?</td><td><input type="radio" name="useful"
          value="Yes">Yes /<input type="radio" name="useful" value="No">No
          /<input type="radio" name="useful" value="A Bit">A Bit</td></tr>
          
          <tr><td colspan="2">Can you provide any suggestions for improvements?<br>
          <TEXTAREA NAME="comments" COLS="40" ROWS="4" wrap="virtual"></TEXTAREA></td></tr>
          
          <tr><td>What is your name?</td><td><input type="text" size="20" name="name"></td></tr>
          <tr><td>What is your email address?</td><td><input type="text" size="20" name="semail"></td></tr>
 	</table></div>
 	          <div align="center"><input type="submit" value="Give Us Your Feedback!"></div>
 	       </form>


<!-- End Content -->
<br>
</td>
          </tr>
        </tbody>
      </table>

      <!-- Begin Footer -->
      <table border="0" cellPadding="0" cellSpacing="0" width="750">
        <tbody>
          <tr height="1">
            <td align="right" bgColor="#333399" height="1" vAlign="top"><img alt="line" src="" width="206" height="1"></td>
          </tr>
          <tr>
            <td align="middle" height="18">
 
 <table border="0" cellPadding="0" cellSpacing="0" width="695">
 <tr>
 <td class="foot">
<DIV ALIGN="CENTER"><small><A href="http://www.openconcept.on.ca/.">Home</A> &nbsp;|&nbsp; <A href="http://www.openconcept.on.ca/about.phtml">About Us</A> &nbsp;|&nbsp; <A href="http://www.openconcept.on.ca/services.phtml">Our Services</A> &nbsp;|&nbsp; <A href="http://www.openconcept.on.ca/experience.phtml">Experience</A> &nbsp;|&nbsp; <A href="http://www.openconcept.on.ca/costs.phtml">Pricing</A> &nbsp;|&nbsp; <A href="http://www.openconcept.on.ca/resource.phtml">Resources</A> &nbsp;|&nbsp; <A href="http://www.openconcept.on.ca/contact.phtml">Contact Us</A></small></DIV>
</td>
 </tr>
 </table>
 
 </td>
 </tr>
          
 </tbody>
 </table>
 <P><br><P>
<center>
<A target="_blank" HREF="http://adbusters.org/home/"><IMG SRC="adbuster.jpg" ALT="What Was That Bump?" BORDER=0 WIDTH=468 HEIGHT=60></A> 
</center>

</body>
</html>

<!-- This document source from http://www.openconcept.on.ca/guide-cards.phtml -->

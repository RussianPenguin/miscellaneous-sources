<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<style type="text/css">
A.black:link {COLOR: #000000; TEXT-DECORATION: none;FONT-FAMILY: Arial,Verdana,Tahoma,sans-serif; FONT-SIZE: 9pt}
A.black:visited {COLOR: #000000; TEXT-DECORATION: none;FONT-FAMILY: Arial,Verdana,Tahoma,sans-serif; FONT-SIZE: 9pt}
A.black:hover {COLOR: #FFFFFF; TEXT-DECORATION: none;FONT-FAMILY: Arial,Verdana,Tahoma,sans-serif; FONT-SIZE: 9pt}
.b {text-decoration: none; color:#FF0000;} 
.b:hover {color:#7785FF;}
.c {text-decoration: none; color:#000000;} 
.c:hover {color:#FFFFFF;}
 pre {color: blue;}
TD.colon {COLOR: #000000; FONT-FAMILY: "MS Sans Serif", sans-serif; FONT-SIZE: 9pt}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta content="программирование на Visual Basic, документация, документы, delphi, pascal, cpp, hardware, web, веб-мастер, советы, описания, доки, manual, Java, C, C++, обучение, исходники, odbc, jdbc, programm, protocols, протоколы, общение, форумapplet, java, design, апплет, дизайн, ява, Free, counters, Trackers, Guestbooks, Access Logs, Banners, Graphics, Banner ads, Fonts, Form Mailer, form mailers, graphics, icons, games, freeware, shareware, forms, guestbooks, Java, Javascript, contests, puzzles, fonts, font resources, E-mail programs, reminder services, product samples, samples, Email services, E-mail services, advertising, graphics, free banner ads, free World Wide Web resources, counters, Trackers, Guestbooks, Access Logs, Banners, Graphics, Banner ads, Fonts, Form Mailer, form mailers, graphics, icons, games, freeware, shareware, forms, guestbooks, Java, Javascript, contests, puzzles, fonts, font resources, E-mail programs, reminder services, product samples, samples, Email services, E-mail services, advertising, graphics, free banner ads, free World Wide Web resources" name="keywords">
<meta NAME="RESOURCE-TYPE"
CONTENT="pop hypertext sources hypermedia server scripting shtml phtml html developer code base tools open source web site browser free software webmaster cgi dhtml dynamic content netscape explorer shareware download website construction free tutorial news design maintenance page hit cvs mailing list projects httpd mod_perl mod www htdig xml perl scripts script server-side-include apache database MySQL mysql msql postres postresql module linux online cpp Visual Basic JavaScript delphi wap job informer java opengl directx">
<title>Информационный сервер для программистов - исходники со всего света.</title>
</head>

<body topmargin="0" leftmargin="0" marginwidth="0" marginheigth="0" bgcolor=white>

<form action="/cgi-bin/sources/search/search.pl" method="get" align="left">
  <input type="hidden" name="stpos" value="0"><table border="0" cellpadding="0"
  cellspacing="0" width="750">
    <tr>
      <td valign="top" rowspan="2"><table border="0" cellpadding="0" cellspacing="0" width="287">
        <tr>
          <td colspan="2" bgcolor="#A5E4A7" valign="middle" align="center"><b>WWW.ИСХОДНИКИ.РУ</b></td>
          <td bgcolor="#000080" valign="middle" align="center"><b><font face="Tahoma"
          style="font-size: 8pt" size="-1" color="#FFFFFF">cpp.sources.ru</font></b></td>
        </tr>
        <tr>
          <td bgcolor="#000080" valign="middle" align="center"><b><font face="Tahoma"
          style="font-size: 8pt" size="-1" color="#FFFFFF">java.sources.ru</font></b></td>
          <td bgcolor="#C0C0C0" valign="middle" align="center"><font face="Tahoma"
          style="font-size: 8pt" size="-1"><b>web.sources.ru</b></font></td>
          <td bgcolor="#A5E4A7" valign="middle" align="center"><font face="Tahoma"
          style="font-size: 8pt" size="-1"><b>soft.sources.ru</b></font></td>
        </tr>
        <tr>
          <td bgcolor="#C0C0C0" valign="middle" align="center"><font face="Tahoma"
          style="font-size: 8pt" size="-1"><b>jdbc.sources.ru</b></font></td>
          <td bgcolor="#A5E4A7" valign="middle" align="center"><font face="Tahoma"
          style="font-size: 8pt" size="-1"><b>asp.sources.ru</b></font></td>
          <td bgcolor="#000080" valign="middle" align="center"><b><font face="Tahoma"
          style="font-size: 8pt" size="-1" color="#FFFFFF">api.sources.ru</font></b></td>
        </tr>
      </table>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td><font style="font-size: 8pt" size="2" face="Tahoma">&nbsp; Поиск по
          программированию :<br>
          </font>&nbsp; <input type="text" size="13" name="query"> <input type="submit"
          value="Поиск"><font size="1"><input
          TYPE="Radio" NAME="stype" VALUE="AND" checked>&quot;AND&quot; <input TYPE="Radio"
          NAME="stype" VALUE="OR">&quot;OR&quot;</font>


<!--TopList COUNTER--><a target=_top
href="http://top.list.ru/jump?from=89876"><script language="JavaScript"><!--
d=document;a='';a+=';r='+escape(d.referrer)
js=10//--></script><script language="JavaScript1.1"><!--
a+=';j='+navigator.javaEnabled()
js=11//--></script><script language="JavaScript1.2"><!--
s=screen;a+=';s='+s.width+'*'+s.height
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth)
js=12//--></script><script language="JavaScript1.3"><!--
js=13//--></script><script language="JavaScript"><!--
d.write('<img src="http://top.list.ru/counter'+
'?id=89876;t=57;js='+js+a+';rand='+Math.random()+
'" alt="TopList" '+ 'border=0 height=1 width=1>')
if(js>11)d.write('<'+'!-- ')//--></script><noscript><img
src="http://top.list.ru/counter?js=na;id=89876;t=57"
border=0 height=1 width=1
alt="TopList"></noscript><script language="JavaScript"><!--
if(js>11)d.write('--'+'>')//--></script></a><!--TopList COUNTER-->


<a href="http://counter.rambler.ru/top100/"><img src="http://counter.rambler.ru/top100.cnt?163871" alt="Rambler's Top100" width=1 height=1 border=0></a>

<!-- SpyLOG f:0211 --> 
<script language="javascript"> 
u="u1624.10.spylog.com";d=document;nv=navigator;na=nv.appName;p=1; 
bv=Math.round(parseFloat(nv.appVersion)*100); 
n=(na.substring(0,2)=="Mi")?0:1;rn=Math.random();z="p="+p+"&rn="+rn;y=""; 
y+="<a href='http://"+u+"/cnt?f=3&p="+p+"&rn="+rn+"' target=_blank>"; 
y+="<img src='http://"+u+"/cnt?"+z+ "&r="+escape(d.referrer)+"&pg="+escape(window.location.href)+"' border=0 width=1 height=1 alt='SpyLOG'>"; 
y+="</a>"; d.write(y);if(!n) { d.write("<"+"!--"); }//--></script><noscript> 
<a href="http://u1624.10.spylog.com/cnt?f=3&p=1" target=_blank> 
<img src="http://u1624.10.spylog.com/cnt?p=1" alt='SpyLOG' border='0' width=1 height=1 > 
</a></noscript><script language="javascript1.2"><!-- 
if(!n) { d.write("--"+">"); }//--></script> 
<!-- SpyLOG -->


</td>
        </tr>
      </table>
      </td>
      <td align="center"><font style="font-size: 15pt" color="#4904B1" size="4"
      face="Times New Roman">Информационный сервер</font></td>
    </tr>
    <tr>
      <td>


<!-- LBE -->
<script>
// <!--
rand = Math.round((Math.random() * (10000 - 1)));
document.write("<a href=http://www.lbe.ru/cgi-bin/href/castle?" + rand + " target=_blank><img src=http://www.lbe.ru/cgi-bin/banner/castle?" + rand + " width=468 height=60 border=0 alt=LBE ismap></a><br>");
// -->
</script>
<noscript>
                                                                                                                                                                <br>
</noscript>
<!-- LBE -->



      </td>
    </tr>
    <tr>
      <td colspan="2"><table border="0" cellpadding="0" cellspacing="1" width="100%">
        <tr>
          <td align="center" width="11%" bgcolor="#E0E0C6"><a
          href="../www.sources.html"><font color="#000000" size="2">На главную</font></a></td>
          <td align="center" width="20%" bgcolor="#E0E0C6"><a
          href="../subscribe.html"><font color="#000000" size="2">Подписаться на новости</font></a></td>
          <td align="center" width="11%" bgcolor="#E0E0C6"><a href="../cgi-bin/sources/Ultimate.pl"><font color="#000000" size="2">Форум</font></a></td>
          <td align="center" width="11%" bgcolor="#E0E0C6"><a href="../books.html"><font color="#000000" size="2">Книги</font></a></td>
          <td align="center" width="7%" bgcolor="#E0E0C6"><a href="http://chat.vidcenter.ru:82/"><font color="#000000" size="2">Чат</font></a></td>
          <td align="center" width="13%" bgcolor="#E0E0C6"><a href="http://www.countries.ru/"><font color="#000000" size="2">Страны мира</font></a></td>
          <td align="center" width="29%" bgcolor="#E0E0C6"><b>4</b> пользователей на сервере.
</td>
        </tr>
      </table>
      </td>
    </tr>
  </table>
</form>

<div align="center"><center>

<table width="680" cellspacing="0" cellpadding="0">
  <tr>
    <td><p align="center">&nbsp;</p>
    <h3 align="center"><font color="#a0a099">Дерево и кнопки для MFC Grid
    Control</font></h3>
    <hr>
    <p>Автор: <a href="mailto:kbertelson@yahoo.com">Ken Bertelson</a> <ul
    class="download">
      <li><a href="GridTreeCtrl.zip">Скачать демонстрационный проект
        - 220 Kb </a></li>
    </ul>
    <p><img alt="Grid w/ Tree + Buttons" border="1" height="187" src="GridTreeCtrl1.gif"
    width="555"></p>
    <p><img alt="Implement IE-Style Option Dialog" border="1" height="236"
    src="GridTreeCtrl2.gif" width="285"></p>
    <h2>Описание</h2>
    <p>Этот пример показывает, как добавить в <a
    href="cpp_gridctrl.html">MFC Grid control
    (наследованный от CWnd)</a> такие элементы
    управления как дерево и кнопки. </p>
    <p>Пример наследует классы от <code>CGridCellBase</code>,
    который содержит в себе описание различных типов
    ячеек. Теперь добавлены следующие типы ячеек: <ul>
      <li>Ячейки которые рисуют дерево</li>
      <li>Ячейки, которые рисуют один или несколько
        элементов управления</li>
      <li>Ячейки, которые рисуют дерево + элементы
        управления</li>
      <li>Виртуальные ячейки - не содержащие данных</li>
    </ul>
    <p>Работая с <code>CGridCellBase</code>, Вы можете создавать
    различные виды эффектов не изменяя исходные
    файлы MFC Grid. Пример позволяет наследовать новый
    grid класс.</p>
    <h3>Как установить ячейки, отображающие дерево</h3>
    <p>Добавьте в заголовочный файл CDialog или CView:&nbsp; </p>
    <pre>// (файл .h)

    CGridCtrl m_Grid;           // сам грид
    CTreeColumn m_TreeColumn;   // поддержка колонок дерева
</pre>
    <p>В CDialog или CView добавьте массив UCHAR-ов, который
    определяет стандартные уровни дерева. 1=корень, 2=первая
    ветвь корня и т.д.</p>
    <pre>// (файл .cpp file)

    unsigned char ucPatternAry[] = { 1,2,3,4,4,5,5,3,3,4,2,3,4};
</pre>
    <p>В <code>CDialog</code> или <code>CView</code> укажите информацию
    о колонках, а затем используйте <code>CTreeColumn::TreeSetup()</code>
    для определения расположений строчек. Для <code>CDialog</code>,
    это можно сделать в функции <code>OnInitDialog()</code>. </p>
    <pre>// (файл .cpp)

    m_Grid.SetColumnCount( 4);
    m_Grid.SetFixedColumnCount( 1);

    m_TreeColumn.TreeSetup( &amp;m_Grid, // grid
                      2,           // колонка в которой дерево
                      sizeof( ucPatternAry), // кол-во строк в дереве
                      1,           // Счётчик строк
                      ucPatternAry,// Массив уровней
                      TRUE,        //показываем линии дерева(не grid)
		        	   // F=не показываем
                      TRUE);       // используем первые 3 картинки из
			          // существующего списка картинок
</pre>
    <p>Вы так же можете изменить существующую
    структуру дерева, путём вызова из CTreeColumn функции <code>InsertTreeBranch()</code>
    и <code>DeleteTreeBranch()</code>.</p>
    <h3>Установка ячеек, которые рисуют кнопки</h3>
    <p>Добавьте в заголовочный файл <code>CDialog</code> или <code>CView</code>
    следующие строки: </p>
    <pre>// (файл .h)

    CGridCtrl m_Grid;           // сам 
    CBtnDataBase m_BtnDataBase; // берём общие свойства для кнопок
</pre>
    <p>В .cpp файлы CDialog или CView. </p>
    <pre>// (файл .cpp)

    m_BtnDataBase.SetGrid( &amp;m_Grid);
</pre>
    <p>Возможно Вам захочется использовать свойства
    ячейки с кнопкой для всех кнопочных ячеек.<br>
    Это можно сделать только однажды. </p>
    <pre>// (файл .cpp)

  // Сохраняем старые свойства ячейки
  CGridBtnCell GridCellCopy;
  GridCellCopy.SetBtnDataBase( &amp;m_BtnDataBase);
  CGridCellBase* pCurrCell = m_Grid.GetCell( row, col);
  if (pCurrCell)
      GridCellCopy = *pCurrCell;  //данные сохранятся в m_BtnDataBase
</pre>
    <p>После того, как окно грида создано, замените
    стандартные ячейки ячейками с кнопками по Вашему
    усмотрению. Следующий код вызывается в <code>CDialog::OnInitDialog()</code>.
    </p>
    <pre>// (файл .cpp)

 m_Grid.SetCellType( row, col, RUNTIME_CLASS(CGridBtnCell) );
 CGridBtnCell* pGridBtnCell = (CGridBtnCell*)m_Grid.GetCell(row,col);

 // сообщаем новой ячейке - где лежат её свойства
 pGridBtnCell-&gt;SetBtnDataBase( &amp;m_BtnDataBase);
</pre>
    <p>Пример показывает - как добавить в ячейку до 4-х
    кнопок. </p>
    <pre>// (файл .cpp)

    pGridBtnCell-&gt;SetupBtns(
        0,                  // индекс картинки для рисования
        DFC_BUTTON,         // тип кнопки
        DFCS_BUTTONPUSH,    // на подобие nState в DrawFrameControl()
        CGridBtnCellBase::CTL_ALIGN_CENTER,
                            // горизонтальное выравнивание картинки
        0,                  // ширина, либо 0 для подстраивания под
			    // размер ячейки
        FALSE,              // T=кнопка входит в группу радиокнопок
        &quot;Btn Text&quot; );       // Текст в кнопке; NULL - текста нет
</pre>
    <p>&nbsp;</p>
    <p>&nbsp;</td>
  </tr>
</table>
</center></div>


<hr>
<div align="center"><center>

<table border="0" cellpadding="0" cellspacing="3" width="468">
  <tr>
    <td width="154"><!-- LBE_LITE --> <script>
// <!--
rand = Math.round((Math.random() * (10000 - 1)));
document.write("<a href=http://lite.lbe.ru/cgi-bin/href/castle?" + rand + " target=_blank><img src=http://lite.lbe.ru/cgi-bin/banner/castle?" + rand + " width=468 height=60 border=0 alt=LBE_LITE ismap></a><br>");
// -->
</script> <noscript> <br>
</noscript><!-- LBE_LITE --></td>
  </tr>
</table>
</center></div>
</body>
</html>
